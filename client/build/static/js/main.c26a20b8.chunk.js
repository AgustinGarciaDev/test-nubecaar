(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{127:function(e,t){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),s=a.n(c),o=a(5),i=(a(73),a(6)),l=a(15),u=a(63),m=a.n(u),p=a(8),d=Object(p.b)((function(e){return{auth:e}}))((function(e){return r.a.createElement("header",null,r.a.createElement("div",{className:"logo-brand"},r.a.createElement(l.b,{to:"/"},r.a.createElement("img",{src:m.a,className:"imagen",alt:"Logo Nube CAAR"})),r.a.createElement("h3",null,"Nube CAAR")),e.auth.username&&r.a.createElement("div",{className:"menu"},r.a.createElement("ul",null,r.a.createElement(l.b,{to:"/pendientes"},"Pendientes"),r.a.createElement(l.b,{to:"/nuevo-viaje"},"Nuevo Viaje"),r.a.createElement(l.b,{to:"/historico"},"Hist\xf3rico"),r.a.createElement(l.b,{to:"/amigos"},"Amigos"),r.a.createElement(l.b,{to:"/logout"},"Logout, ",e.auth.name))))})),f=a(1),b=a.n(f),E=a(2),v=a(17),h=a(4),g=a(13),O=a.n(g),x="https://test-nubecaar.herokuapp.com",N=a(7),j=a.n(N),k={logUser:function(e){return function(){var t=Object(E.a)(b.a.mark((function t(a,n){var r,c,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._id){t.next=9;break}return t.next=3,O.a.get("".concat(x,"/api/users/").concat(e._id));case 3:if((c=t.sent).data.success){t.next=6;break}return t.abrupt("return",alert(c.data.error));case 6:r={name:c.data.user.name,username:c.data.user.username,_id:c.data.user._id},t.next=15;break;case 9:return t.next=11,O.a.post("".concat(x,"/api/auth"),Object(h.a)({},e));case 11:if((s=t.sent).data.success){t.next=14;break}return t.abrupt("return",j.a.fire({text:"Usuario y/o Contrase\xf1a Incorrectos",icon:"error",confirmButtonText:"Reintentar"}));case 14:r={name:s.data.loggedUser.name,username:s.data.loggedUser.username,_id:s.data.loggedUser._id};case 15:a({type:"LOG_USER",payload:r});case 16:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},logOutUser:function(){return function(){var e=Object(E.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT_USER"});case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}},w={logUser:k.logUser},C=Object(p.b)((function(e){return{auth:e}}),w)((function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(o.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!1),u=Object(o.a)(l,2),m=u[0],p=u[1],d=function(e){var t=e.target.name,a=e.target.value;s(Object(h.a)(Object(h.a)({},c),{},Object(v.a)({},t,a)))},f=function(){var t=Object(E.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),""!==c.username&&""!==c.password){t.next=3;break}return t.abrupt("return",j.a.fire({text:"Debes completar ambos campos!",icon:"error",confirmButtonText:"Reintentar"}));case 3:return p(!0),t.next=6,e.logUser(c);case 6:p(!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return e.auth.username?r.a.createElement(i.a,{to:"/"}):r.a.createElement("div",{className:"loginContainer z-depth-5"},r.a.createElement("form",{className:"loginForm"},r.a.createElement("div",{className:"input-field"},r.a.createElement("h5",null,"Bienvenido/a...")),r.a.createElement("div",{className:"input-field mt2vh"},r.a.createElement("input",{type:"text",name:"username",id:"username",value:c.username,autoComplete:"off",onChange:d}),r.a.createElement("label",{htmlFor:"username"},"Nombre de Usuario")),r.a.createElement("div",{className:"input-field mt2vh"},r.a.createElement("input",{type:"password",name:"password",id:"password",value:c.password,onChange:d}),r.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a")),r.a.createElement("div",{className:"input-field mt2vh"},r.a.createElement("button",{className:"btn btn-large indigo darken-4",disabled:m,onClick:f},"Ingresar"))))})),y=(a(96),function(e){var t=(new Date).toLocaleDateString(),a=t.split("/")[2],n=parseInt(t.split("/")[1])<10?"0".concat(t.split("/")[1]):t.split("/")[1],c=parseInt(t.split("/")[0])<10?"0".concat(t.split("/")[0]):t.split("/")[0],s="".concat(a,"-").concat(n,"-").concat(c);return r.a.createElement("div",{className:"tripForm z-depth-5"},r.a.createElement("form",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s6 l3"},r.a.createElement("input",{type:"date",name:"fecha",id:"fecha",onChange:e.fieldHandler,min:s,value:e.trip&&e.trip.fecha}),r.a.createElement("label",{htmlFor:"fecha"},"Fecha (*)")),r.a.createElement("div",{className:"input-field col s6 l3"},r.a.createElement("input",{type:"time",name:"hora",id:"hora",onChange:e.fieldHandler,value:e.trip&&e.trip.hora}),r.a.createElement("label",{htmlFor:"hora"},"Hora (*)")),r.a.createElement("div",{className:"input-field col s12 m6 l3"},r.a.createElement("select",{className:"browser-default",name:"tipo",id:"tipo",onChange:e.fieldHandler,value:e.trip&&e.trip.tipo},r.a.createElement("option",{value:"",disabled:!0,selected:!0},"Tipo de Veh\xedculo"),r.a.createElement("option",{value:"S"},"Standard"),r.a.createElement("option",{value:"E"},"Ejecutivo"),r.a.createElement("option",{value:"P"},"Partner"))),r.a.createElement("div",{className:"input-field col s12 m6 l3"},r.a.createElement("select",{className:"browser-default",name:"restringido",id:"restringido",onChange:e.fieldHandler,value:e.trip&&e.trip.restringido.toString()},r.a.createElement("option",{value:"",disabled:!0,selected:!0},"\xbfQui\xe9nes ver\xe1n este viaje?"),r.a.createElement("option",{value:"false"},"Todas las agencias"),r.a.createElement("option",{value:"true"},"Solo mis amigos")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12 m6"},r.a.createElement("input",{type:"text",name:"nombre",id:"nombre",onChange:e.fieldHandler,value:e.trip&&e.trip.nombre,autoComplete:"off",autoFocus:e.trip}),r.a.createElement("label",{htmlFor:"nombre"},"Nombre del Pasajero (*)")),r.a.createElement("div",{className:"input-field col s12 m6"},r.a.createElement("input",{type:"text",name:"telefono",id:"telefono",onChange:e.fieldHandler,value:e.trip&&e.trip.telefono,autoComplete:"off",autoFocus:e.trip}),r.a.createElement("label",{htmlFor:"telefono"},"Tel\xe9fono del Pasajero"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12 m6"},r.a.createElement("input",{type:"text",name:"dOrigen",id:"dOrigen",onChange:e.fieldHandler,value:e.trip&&e.trip.dOrigen,autoComplete:"off",autoFocus:e.trip}),r.a.createElement("label",{htmlFor:"dOrigen"},"Direcci\xf3n de Origen (*)")),r.a.createElement("div",{className:"input-field col s12 m6"},r.a.createElement("input",{type:"text",name:"lOrigen",id:"lOrigen",onChange:e.fieldHandler,value:e.trip&&e.trip.lOrigen,autoComplete:"off",autoFocus:e.trip}),r.a.createElement("label",{htmlFor:"lOrigen"},"Localidad de Origen (*)"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12 m6"},r.a.createElement("input",{type:"text",name:"dDestino",id:"dDestino",onChange:e.fieldHandler,value:e.trip&&e.trip.dDestino,autoComplete:"off",autoFocus:e.trip}),r.a.createElement("label",{htmlFor:"dDestino"},"Direcci\xf3n de Destino")),r.a.createElement("div",{className:"input-field col s12 m6"},r.a.createElement("input",{type:"text",name:"lDestino",id:"lDestino",onChange:e.fieldHandler,value:e.trip&&e.trip.lDestino,autoComplete:"off",autoFocus:e.trip}),r.a.createElement("label",{htmlFor:"lDestino"},"Localidad de Destino"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 l4"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",className:"filled-in",name:"paradas",id:"paradas",onChange:e.fieldHandler,checked:e.trip&&e.trip.paradas}),r.a.createElement("span",null,"\xbfTiene paradas intermedias?")),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",className:"filled-in",name:"conRegreso",id:"conRegreso",onChange:e.fieldHandler,checked:e.trip&&e.trip.conRegreso}),r.a.createElement("span",null,"\xbfEs con espera y regreso?")),r.a.createElement("br",null),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",className:"filled-in",name:"tarifa2",id:"tarifa2",onChange:e.fieldHandler,checked:e.trip&&e.trip.tarifa2}),r.a.createElement("span",null,"\xbfEs apto TARIFA 2?"))),r.a.createElement("div",{className:"input-field col s12 l8"},r.a.createElement("textarea",{className:"materialize-textarea",name:"observaciones",id:"observaciones",onChange:e.fieldHandler,value:e.trip&&e.trip.observaciones,autoFocus:e.trip}),r.a.createElement("label",{htmlFor:"observaciones"},"Ingrese aqu\xed informaci\xf3n extra"))),r.a.createElement("div",{className:"row botones"},r.a.createElement("div",{className:"col s6"},r.a.createElement("button",{className:"btn red darken-4",onClick:e.cancelHandler,disabled:e.loading},"Cancelar")),r.a.createElement("div",{className:"col s6"},r.a.createElement("button",{className:"btn green darken-4",onClick:e.submitHandler,disabled:e.loading},"Validar")))))}),T={newTrip:function(e){return function(){var t=Object(E.a)(b.a.mark((function t(a,n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post("".concat(x,"/api/trips/").concat(e.emisor),Object(h.a)({},e));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},getOtherUsers:function(){return function(){var e=Object(E.a)(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat(x,"/api/users"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},saveFriends:function(e,t){return function(){var a=Object(E.a)(b.a.mark((function a(n,r){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.a.put("".concat(x,"/api/users/friends"),{username:t,friends:e});case 2:return c=a.sent,a.abrupt("return",c.data);case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},getTrips:function(e,t){return function(){var a=Object(E.a)(b.a.mark((function a(n,r){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.a.get("".concat(x,"/api/trips/").concat(e,"/").concat(t));case 2:return c=a.sent,a.abrupt("return",c.data);case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},deleteTrip:function(e,t){return function(){var a=Object(E.a)(b.a.mark((function a(n,r){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.a.delete("".concat(x,"/api/trips/").concat(t,"/trip/").concat(e));case 2:return c=a.sent,a.abrupt("return",c.data);case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},modifyTrip:function(e,t){return function(){var a=Object(E.a)(b.a.mark((function a(n,r){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.a.put("".concat(x,"/api/trips/").concat(e),Object(h.a)({},t));case 2:return c=a.sent,a.abrupt("return",c.data);case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},getHistoryTrips:function(e,t){return function(){var a=Object(E.a)(b.a.mark((function a(n,r){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.a.get("".concat(x,"/api/trips/").concat(e,"/").concat(t));case 2:return c=a.sent,a.abrupt("return",c.data);case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},takeTrip:function(e,t){return function(){var a=Object(E.a)(b.a.mark((function a(n,r){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.a.get("".concat(x,"/api/trips/").concat(e,"/trip/").concat(t));case 2:return c=a.sent,a.abrupt("return",c.data);case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},returnTrip:function(e,t){return function(){var a=Object(E.a)(b.a.mark((function a(n,r){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.a.put("".concat(x,"/api/trips/").concat(e,"/trip/").concat(t));case 2:return c=a.sent,a.abrupt("return",c.data);case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}},S={newTrip:T.newTrip},I=Object(p.b)((function(e){return{auth:e}}),S)((function(e){var t=Object(n.useState)({paradas:!1,conRegreso:!1,tarifa2:!1,restringido:!1}),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(!1),l=Object(o.a)(i,2),u=l[0],m=l[1],p=function(){var t=Object(E.a)(b.a.mark((function t(a){var n,r,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=!1,["fecha","hora","nombre","lOrigen","dOrigen"].map((function(e){return n=""===c[e]||void 0===c[e]||n,!1})),!n){t.next=6;break}return t.abrupt("return",j.a.fire({text:"Los campos marcados con (*) son obligatorios!",icon:"error",confirmButtonText:"Reintentar"}));case 6:return m(!0),r=Object(h.a)(Object(h.a)({},c),{},{emisor:e.auth.username}),t.next=10,e.newTrip(r);case 10:return s=t.sent,m(!1),t.next=14,j.a.fire({text:s.success?"Viaje cargado con \xe9xito!":s.error,icon:s.success?"success":"error",confirmButtonText:s.success?"OK":"Reintentar!"});case 14:if(!s.success){t.next=16;break}return t.abrupt("return",e.history.push("/"));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"newTripContainer"},r.a.createElement(y,{fieldHandler:function(e){var t=e.target.name,a="checkbox"===e.target.type?!!e.target.checked:e.target.value;a="restringido"===t?"true"===a:a,"tipo"===t&&""===a&&(a="S"),"restringido"===t&&""===a&&(a=!1),s(Object(h.a)(Object(h.a)({},c),{},Object(v.a)({},t,a)))},submitHandler:p,cancelHandler:function(t){t.preventDefault(),e.history.push("/")},loading:u}))})),D=a(67),R={getOtherUsers:T.getOtherUsers,saveFriends:T.saveFriends},H=Object(p.b)((function(e){return{auth:e}}),R)((function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)([]),l=Object(o.a)(i,2),u=l[0],m=l[1],p=Object(n.useState)(!1),d=Object(o.a)(p,2),f=d[0],v=d[1];Object(n.useEffect)((function(){h()}),[e.auth.username]);var h=function(){var t=Object(E.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getOtherUsers();case 2:return a=t.sent,s(a.success?a.users:[]),a.success&&a.users.map((function(t){return t.username===e.auth.username&&m(t.friends),!1})),t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(e){if(e.target.checked)m([].concat(Object(D.a)(u),[e.target.name]));else{var t=u.filter((function(t){return t!==e.target.name}));m(t)}},O=function(){var t=Object(E.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),v(!0),t.next=4,e.saveFriends(u,e.auth.username);case 4:return n=t.sent,v(!1),t.next=8,j.a.fire({text:n.success?"Lista de amigos modificada!":n.error,icon:n.success?"success":"error",confirmButtonText:n.success?"OK":"Reintentar"});case 8:n.success&&e.history.push("/");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"amigosContainer z-depth-5"},r.a.createElement("p",{className:"titulo flow-text"},"DEFINI O MODIFICA TUS AMIGOS"),r.a.createElement("p",{className:"flow-text"},'Pod\xe9s elegir una o m\xe1s agencias que ser\xe1n tus "amigos".  En cada viaje tendr\xe1s que definir si quer\xe9s que ese viaje lo vean todos los usuarios o solamente tus amigos.  \xa1Pod\xe9s modificarlo luego si cambi\xe1s de idea!'),r.a.createElement("div",{className:"nombresAmigos row"},c.map((function(t){return t.username!==e.auth.username&&r.a.createElement("label",{key:t._id,className:"col s12 m6 l4"},r.a.createElement("input",{type:"checkbox",className:"filled-in",name:t.username,id:t.username,checked:u.includes(t.username),onChange:g}),r.a.createElement("span",null,t.name))}))),r.a.createElement("div",{className:"amigosBotones row"},r.a.createElement("div",{className:"col s12 l6"},r.a.createElement("button",{className:"btn red darken-4",onClick:function(t){t.preventDefault(),e.history.push("/")},disabled:f},"Cancelar")),r.a.createElement("div",{className:"col s12 l6"},r.a.createElement("button",{className:"btn green darken-4",onClick:O,disabled:f},"Validar"))))})),A=(a(97),function(e){var t=e.trip,a=Object(n.useState)(!1),c=Object(o.a)(a,2),s=c[0],i=c[1];return r.a.createElement("div",{className:"singleTripContainer z-depth-5"},r.a.createElement("p",{className:"tripNumero"},"( ",t.numero," )"),r.a.createElement("div",{className:"tripFechaHora"},r.a.createElement("span",{className:"material-icons left"},"schedule"),r.a.createElement("p",null,r.a.createElement("strong",null,t.fecha)," a las ",r.a.createElement("strong",null,t.hora)," hs")),r.a.createElement("p",{className:"tripOrigen"},t.lOrigen.toUpperCase()),r.a.createElement("p",{className:"tripDestino"},t.lDestino&&t.lDestino.toUpperCase()),"E"===t.tipo?r.a.createElement("p",{className:"tripTipoEjecutivo"},"VIP"):"P"===t.tipo?r.a.createElement("p",{className:"tripTipoPartner"},"PARTNER"):r.a.createElement("p",{className:"tripTipoEjecutivo"}),r.a.createElement("p",{className:"tripTarifa2"},t.tarifa2?"TARIFA 2":""),r.a.createElement("span",{className:"material-icons tripPlusInfo right",onClick:function(){return i(!s)}},s?"remove_circle":"add_circle"),"taken"===t.status&&r.a.createElement("p",{className:"viajeAceptado"},t.emisor===e.user?"Acept\xf3:":"Emiti\xf3:",r.a.createElement("span",null,t.emisor===e.user?t.receptor:t.emisor)),s&&r.a.createElement("div",{className:"moreInfoContainer"},r.a.createElement("div",{className:"moreInfoPasajero"},r.a.createElement("span",{className:"material-icons left"},"face"),r.a.createElement("p",{className:"moreInfoNombreTelefono"},r.a.createElement("strong",null,t.nombre)," - (",t.telefono,")")),r.a.createElement("div",{className:"moreInfoLine"},r.a.createElement("p",null,"ORIGEN:"),r.a.createElement("span",null,t.dOrigen," (",t.lOrigen,")")),r.a.createElement("div",{className:"moreInfoLine"},r.a.createElement("p",null,"DESTINO:"),r.a.createElement("span",null,t.dDestino," (",t.lDestino,")")),r.a.createElement("div",{className:"moreInfoLine observaciones"},r.a.createElement("p",null,"OBSERVACIONES:"),r.a.createElement("span",null,t.observaciones)),r.a.createElement("div",{className:"moreInfoParticularidades"},"E"===t.tipo&&r.a.createElement("span",{className:"badge yellow accent-2 black-text"},"VEHICULO EJECUTIVO"),"P"===t.tipo&&r.a.createElement("span",{className:"badge yellow accent-2 black-text"},"VEHICULO PARTNER"),t.paradas&&r.a.createElement("span",{className:"badge yellow accent-2 black-text"},"TIENE PARADAS INTERMEDIAS"),t.conRegreso&&r.a.createElement("span",{className:"badge yellow accent-2 black-text"},"ES CON ESPERA Y REGRESO"),t.tarifa2&&r.a.createElement("span",{className:"badge yellow accent-2 black-text"},"APTO TARIFA 2")),r.a.createElement("div",{className:"moreInfoEmisorYBotones"},r.a.createElement("p",{className:"moreInfoEmisor"},"Emitido por ",r.a.createElement("span",null,t.emisor)),r.a.createElement("div",{className:"moreInfoBotones"},e.user===t.emisor?r.a.createElement(r.a.Fragment,null,"deleted"===t.status?r.a.createElement("p",{className:"viajeEliminado"},"VIAJE ELIMINADO"):"taken"===t.status?r.a.createElement("button",{className:"btn blue darken-4","data-trip":t.numero,onClick:e.returnHandler,disabled:e.loading},"Devolver a la Nube"):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn blue darken-4","data-trip":t.numero,onClick:e.modifyHandler,disabled:e.loading},"Modificar"),r.a.createElement("button",{className:"btn red darken-4","data-trip":t.numero,onClick:e.deleteHandler,disabled:e.loading},"Eliminar"))):"taken"===t.status?r.a.createElement("button",{className:"btn blue darken-4","data-trip":t.numero,onClick:e.returnHandler,disabled:e.loading},"Devolver a la Nube"):r.a.createElement("button",{className:"btn green darken-4","data-trip":t.numero,disabled:e.loading,onClick:e.takeHandler},"ACEPTAR!")))))}),F={getTrips:T.getTrips,deleteTrip:T.deleteTrip,modifyTrip:T.modifyTrip,takeTrip:T.takeTrip},B=Object(p.b)((function(e){return{auth:e}}),F)((function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(!1),l=Object(o.a)(i,2),u=(l[0],l[1]),m=Object(n.useState)(!1),p=Object(o.a)(m,2),d=p[0],f=p[1];Object(n.useEffect)((function(){e.socket&&e.socket.on("reloadOrder",(function(){return g()})),g()}),[e.auth.username,e.socket]);var g=function(){var t=Object(E.a)(b.a.mark((function t(){var a,n,r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getTrips(e.auth.username,"pending");case 2:a=t.sent,n=[],a.success&&(r=a.trips.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{fecha:"".concat(e.fecha.split("-")[2],"-").concat(e.fecha.split("-")[1],"-").concat(e.fecha.split("-")[0]),dateForOrder:new Date(e.fecha.split("-")[0],e.fecha.split("-")[1]-1,e.fecha.split("-")[2])})})),n=r.sort((function(e,t){return e.dateForOrder-t.dateForOrder}))),s(n),c=n.length>0?"( ".concat(n.length," ) Sistema Nube | CAAR"):"Sistema Nube | CAAR",document.title=c;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(E.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=parseInt(a.target.dataset.trip),t.next=4,j.a.fire({text:"\xbfEstas seguro de querer eliminar este viaje?",icon:"warning",showCancelButton:!0,confirmButtonColor:"green",cancelButtonColor:"red",confirmButtonText:"Si, eliminar",cancelButtonText:"No, cancelar"});case 4:if(!t.sent.value){t.next=14;break}return u(!0),t.next=9,e.deleteTrip(n,e.auth.username);case 9:return r=t.sent,t.next=12,j.a.fire({text:r.success?"El viaje ha sido eliminado con \xe9xito.":"Ocurri\xf3 un error.  Reint\xe9ntelo!",icon:r.success?"success":"error",confirmButtonText:r.success?"OK":"Reintentar"});case 12:u(!1),r.success&&(e.socket.emit("reloadPlease"),e.history.push("/"));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(e){e.preventDefault();var t=e.target.dataset.trip,a=c.filter((function(e){return e.numero===parseInt(t)}));f(Object(h.a)(Object(h.a)({},a[0]),{},{fecha:"".concat(a[0].fecha.split("-")[2],"-").concat(a[0].fecha.split("-")[1],"-").concat(a[0].fecha.split("-")[0])}))},N=function(){var t=Object(E.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=!1,["fecha","hora","nombre","lOrigen","dOrigen"].map((function(e){return n=""===d[e]||void 0===d[e]||n,!1})),!n){t.next=6;break}return t.abrupt("return",j.a.fire({text:"Los campos marcados con (*) son obligatorios!",icon:"error",confirmButtonText:"Reintentar"}));case 6:return t.next=8,e.modifyTrip(e.auth.username,d);case 8:return r=t.sent,t.next=11,j.a.fire({text:r.success?"Viaje modificado con \xe9xito":"Ha ocurrido un error.  Reint\xe9ntelo!",icon:r.success?"success":"error",confirmButtonText:r.success?"OK":"Reintentar"});case 11:f(!1),r.success&&e.socket.emit("reloadPlease"),e.history.push("/");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(E.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=a.target.dataset.trip,t.next=4,j.a.fire({text:"\xbfEstas seguro de querer aceptar este viaje?",icon:"warning",showCancelButton:!0,confirmButtonColor:"green",cancelButtonColor:"red",confirmButtonText:"Si, tomarlo!",cancelButtonText:"No, cancelar"});case 4:if(!t.sent.value){t.next=14;break}return u(!0),t.next=9,e.takeTrip(e.auth.username,n);case 9:return r=t.sent,t.next=12,j.a.fire({text:r.success?"El viaje ha sido tomado con \xe9xito.":"Ocurri\xf3 un error.  Reint\xe9ntelo!",icon:r.success?"success":"error",confirmButtonText:r.success?"OK":"Reintentar"});case 12:u(!1),r.success&&(e.socket.emit("reloadPlease"),e.history.push("/"));case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"pendingContainer"},d?r.a.createElement(y,{trip:d,cancelHandler:function(e){e.preventDefault(),f(!1)},fieldHandler:function(e){var t=e.target.name,a="checkbox"===e.target.type?!!e.target.checked:e.target.value;a="restringido"===t?"true"===a:a,"tipo"===t&&""===a&&(a="S"),"restringido"===t&&""===a&&(a=!1),f(Object(h.a)(Object(h.a)({},d),{},Object(v.a)({},t,a)))},submitHandler:N}):c.map((function(t){return r.a.createElement(A,{trip:t,user:e.auth.username,key:t.numero,deleteHandler:O,modifyHandler:x,takeHandler:k})})))})),U={getHistoryTrips:T.getHistoryTrips,returnTrip:T.returnTrip},P=Object(p.b)((function(e){return{auth:e}}),U)((function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)([]),l=Object(o.a)(i,2),u=l[0],m=l[1],p=Object(n.useState)(!1),d=Object(o.a)(p,2),f=d[0],v=d[1];Object(n.useEffect)((function(){""!==c&&h()}),[c]);var h=function(){var t=Object(E.a)(b.a.mark((function t(){var a,n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="D"===c?"deleted":"taken",t.next=3,e.getHistoryTrips(e.auth.username,a);case 3:if((n=t.sent).success){t.next=7;break}return s(""),t.abrupt("return",!1);case 7:return r="D"===c?n.trips:"E"===c?n.trips.filter((function(t){return t.emisor===e.auth.username})):n.trips.filter((function(t){return t.receptor===e.auth.username})),m(r),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(E.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=parseInt(a.target.dataset.trip),t.next=4,j.a.fire({text:"\xbfEstas seguro de querer devolver este viaje a la nube?",icon:"warning",showCancelButton:!0,confirmButtonColor:"green",cancelButtonColor:"red",confirmButtonText:"Si, devolver",cancelButtonText:"No, cancelar"});case 4:if(!t.sent.value){t.next=14;break}return v(!0),t.next=9,e.returnTrip(e.auth.username,n);case 9:return r=t.sent,t.next=12,j.a.fire({text:r.success?"El viaje ha sido devuelto con \xe9xito.":"Ocurri\xf3 un error.  Reint\xe9ntelo!",icon:r.success?"success":"error",confirmButtonText:r.success?"OK":"Reintentar"});case 12:v(!1),r.success&&(e.socket.emit("reloadPlease"),e.history.push("/"));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"historicoContainer"},r.a.createElement("div",{className:"historicoMenu"},r.a.createElement("button",{className:"btn light-blue ".concat("E"===c?"darken-4":"lighten-2"),onClick:function(){return s("E")}},"Viajes EMITIDOS"),r.a.createElement("button",{className:"btn light-blue ".concat("A"===c?"darken-4":"lighten-2"),onClick:function(){return s("A")}},"Viajes ACEPTADOS"),r.a.createElement("button",{className:"btn light-blue ".concat("D"===c?"darken-4":"lighten-2"),onClick:function(){return s("D")}},"Viajes ELIMINADOS")),r.a.createElement("div",{className:"historicoViajes"},u.map((function(t){return r.a.createElement(A,{trip:t,user:e.auth.username,returnHandler:g,loading:f})}))))})),L=a(65),_=a.n(L);var V={logUser:k.logUser,logOutUser:k.logOutUser},M=Object(p.b)((function(e){return{auth:e}}),V)((function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],s=a[1];Object(n.useEffect)((function(){e.auth.username&&s(_()(x))}),[e.auth.username]),!e.auth.username&&localStorage.getItem("_id")&&e.logUser({_id:localStorage.getItem("_id")});var u=e.auth.username||localStorage.getItem("_id")?r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/pendientes",render:function(e){return r.a.createElement(B,Object.assign({},e,{socket:c}))}}),r.a.createElement(i.b,{path:"/nuevo-viaje",render:function(e){return r.a.createElement(I,Object.assign({},e,{socket:c}))}}),r.a.createElement(i.b,{path:"/historico",render:function(e){return r.a.createElement(P,Object.assign({},e,{socket:c}))}}),r.a.createElement(i.b,{path:"/amigos",render:function(e){return r.a.createElement(H,Object.assign({},e,{socket:c}))}}),r.a.createElement(i.b,{path:"/logout",render:function(){return e.logOutUser(),!1}}),r.a.createElement(i.a,{to:"/pendientes"})):r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:C}),r.a.createElement(i.a,{to:"/login"}));return r.a.createElement(l.a,null,r.a.createElement(d,null),r.a.createElement("div",{className:"mainContainer"},u))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=a(22),G=a(66),K={},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_USER":return localStorage.setItem("_id",t.payload._id),Object(h.a)(Object(h.a)({},e),t.payload);case"LOGOUT_USER":return localStorage.clear(),{};default:return e}},J=Object(q.c)(z,Object(q.a)(G.a));s.a.render(r.a.createElement(p.a,{store:J},r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,a){e.exports=a.p+"static/media/logoNube.ccec3614.png"},68:function(e,t,a){e.exports=a(130)},73:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.c26a20b8.chunk.js.map